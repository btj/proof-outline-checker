/*!
 * drag-tracker v0.4.5
 * https://github.com/Sphinxxxx/drag-tracker#readme
 *
 * Copyright 2017-2018 Andreas Borgen
 * Released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dragTracker=e()}(this,function(){"use strict";return function(t){var e=Element.prototype;e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.closest||(e.closest=function(t){var e=this;do{if(e.matches(t))return e;e="svg"===e.tagName?e.parentNode:e.parentElement}while(e);return null});var n=(t=t||{}).container||document.documentElement,o=t.selector,a=t.callback||console.log,i=t.callbackDragStart,c=t.callbackDragEnd,r=t.callbackClick,u=t.propagateEvents,d=!1!==t.roundCoords,s=!1!==t.dragOutside,l=t.handleOffset||!1!==t.handleOffset,f=null;switch(l){case"center":f=!0;break;case"topleft":case"top-left":f=!1}var h=void 0,v=void 0,p=void 0;function m(t,e,o,a){var i=t.clientX,c=t.clientY;function r(t,e,n){return Math.max(e,Math.min(t,n))}if(e){var u=e.getBoundingClientRect();i-=u.left,c-=u.top,o&&(i-=o[0],c-=o[1]),a&&(i=r(i,0,u.width),c=r(c,0,u.height)),e!==n&&(null!==f?f:"circle"===e.nodeName||"ellipse"===e.nodeName)&&(i-=u.width/2,c-=u.height/2)}return d?[Math.round(i),Math.round(c)]:[i,c]}function g(t){t.preventDefault(),u||t.stopPropagation()}function w(t){(h=o?o instanceof Element?o.contains(t.target)?o:null:t.target.closest(o):{})&&(g(t),v=o&&l?m(t,h):[0,0],p=m(t,n,v),d&&(p=p.map(Math.round)),i&&i(h,p))}function E(t){if(h){g(t);var e=m(t,n,v,!s);a(h,e,p)}}function b(t){if(h){if(c||r){var e=m(t,n,v,!s);r&&p[0]===e[0]&&p[1]===e[1]&&r(h,p),c&&c(h,e,p)}h=null}}function k(t){b(D(t))}function L(t){return void 0!==t.buttons?1===t.buttons:1===t.which}function M(t,e){1===t.touches.length?e(D(t)):b(t)}function D(t){var e=t.targetTouches[0];return e||(e=t.changedTouches[0]),e.preventDefault=t.preventDefault.bind(t),e.stopPropagation=t.stopPropagation.bind(t),e}n.addEventListener("mousedown",function(t){L(t)&&w(t)}),n.addEventListener("touchstart",function(t){M(t,w)}),window.addEventListener("mousemove",function(t){h&&(L(t)?E(t):b(t))}),window.addEventListener("touchmove",function(t){M(t,E)}),window.addEventListener("mouseup",function(t){h&&!L(t)&&b(t)}),n.addEventListener("touchend",k),n.addEventListener("touchcancel",k)}});